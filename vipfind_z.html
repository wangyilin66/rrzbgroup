<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8" />
	<title>会员查询</title>
	<link rel="stylesheet" href="./layui/css/layui.css">
	<link rel="stylesheet" href="./css/hyfind.css">
	<link rel="stylesheet" href="./css/header.css">
	<link rel="stylesheet" href="./css/yyui.css">
	<style>
		.hygl{
			border-bottom: 5px solid #93D1FF;
		}
		html,body{
			height: 100%;
		}
		.hytitle{
			display: block
		}
		#lvip{
			border-bottom: 5px solid rgba(147, 209, 255,1);
		}
	</style>
</head>

<body>
	<!-- 头部 -->
	<!-- <div class="headerpage">
	</div> -->
	<header></header>
	<!-- 内容 -->
	<div class="hytitle">
		<div class="hytitle_font">本协会的会员</div>
	</div>
	<div class="content">
		<div class="content_nav">
			<div class="content_navl"><span><i
						class="layui-icon layui-icon-home"></i>首页&nbsp;&nbsp;</span>/<span>&nbsp;<a href="./vipfind_z.html" style="color:#5d8bc8;">会员管理</a>&nbsp;&nbsp;</span>/&nbsp;会员查询
			</div>
			<div class="content_navi">
				<form class="layui-form" action="">
					<div class="layui-container-fluid">
						<div class="layui-fluid">
							<div class="layui-row">
								<div class="layui-col-md3">
									<div class="grid-demo grid-demo-bg1">
										<label for="">会员姓名：
											<div>
												<input type="text" placeholder="会员姓名" id="vipname" style="cursor:auto">
											</div>
										</label>
									</div>
								</div>
								<div class="layui-col-md3">
									<div class="grid-demo">
										<label for="">会员编号：
											<div>
												<input type="text" placeholder="会员编号" id="vipnumber" style="cursor:auto">
											</div>
										</label>
									</div>
								</div>
								<div class="layui-col-md3">
									<div class="layui-form-item">
										<div class="grid-demo grid-demo-bg1">
											<label for="">艺术门类：
												<div>
													<select id="yishu" name="modules" lay-verify="required"
														lay-search="" id="arttype" lay-filter="yishu">
														<option value="">请选择</option>
														<!-- <option value="1">layer</option>
													<option value="2">form</option>
													<option value="3">layim</option> -->
													</select>
												</div>
											</label>
										</div>
									</div>
								</div>
								<div class="layui-col-md3">
									<div class="grid-demo grid-demo-bg1">
										<label for="">地域：
											<div>
												<div class="layui-input-block">
													<input type="text" name="title" lay-verify="title" id="szd" 
														 readonly="readonly" autocomplete="off" placeholder="现所在地" class="layui-input" style="border-radius: 6px;position: relative;cursor: pointer;">
												<img src="img/sanjiao.png" style="width: 26px;position: absolute;top: 2px;left: 268px;"/>
												</div>
												<div id="test1"></div>
											</div>
										</label>
									</div>
								</div>
								<div class="layui-col-md12">
									<div class="layui-col-md4">
										<div class="grid-demo">
											<label for="">入会日期：
												<div>
													<div class="layui-input-inline">
														<div class="date_font date_tubiao"><i
																class="layui-icon layui-icon-date"></i></div>
														<input type="text" name="date" id="time1" lay-verify="date"
															style="width:122px;display: inline-block" placeholder="开始时间"
															autocomplete="off" class="layui-input">
														<div class="date_font z_tubiao">至</div>
														<input type="text" name="date" id="time2" lay-verify="date"
															style="width:122px;display: inline-block" placeholder="结束时间"
															autocomplete="off" class="layui-input">
														<div class="date_font date_tubiao2" onclick="z_qk()"><i
																class="layui-icon layui-icon-refresh-1"></i></div>
													</div>
												</div>
											</label>
										</div>
									</div>
									<div class="layui-col-md4">
										<div class="grid-demo">
											<label for="">推荐单位：
												<div>
													<input type="text" placeholder="推荐单位" id="tjdw" readonly="readonly" style="cursor:pointer">
													<img src="img/sanjiao.png" style="width: 26px;position: absolute;top: 52px;left: 282px;"/>
												</div>
											</label>
										</div>
										<div id="test2">
											
										</div>
									</div>
									<div class="layui-col-md4">
										<div class="grid-demo">
											<label for="">组织身份：
												<div>
													<select name="modules" lay-verify="required" lay-search="" id="zzsf"
														lay-filter="zzsf">
														<option value="">请选择</option>
														<!-- <option value="1">aaaa</option>
																<option value="2">bbb</option>
																<option value="3">ccc</option> -->
													</select>
												</div>
											</label>
										</div>
									</div>
								</div>

							</div>
						</div>
					</div>

			</div>
			<div class="hy_btn">
				<button type="reset" class="layui-btn layui-btn-normal" id="btnclear"
					style="background-color: grey;">清空条件</button>
				<button type="button" class="layui-btn layui-btn-normal" onclick="tec()">通讯录导出</button>
				<a href="./newvip_z.html"><button type="button" class="layui-btn layui-btn-normal">新增</button></a>
				<button type="button" class="layui-btn layui-btn-normal" id="tjfind">查询</button>
				<div class="clear"></div>
			</div>
			</form>
			<div class="findres">
				<button type="button" class="layui-btn layui-btn-normal" onclick="jqchk()">批量导出</button>
				<table class="layui-table" lay-skin="line">
					<colgroup>
						<col width="150">
						<col width="200">
						<col>
					</colgroup>
					<thead>
						<tr class="tatou">
							<th style="width: 50px">
								<input type="checkbox" name="" title="" lay-skin="primary" id="checkAll">
							</th>
							<th id="ptnum">平台编号</th>
							<th>会员编号</th>
							<th>会员姓名</th>
							<th>入会日期</th>
							<th>推荐单位/人</th>
							<th>组织身份</th>
							<th>艺术门类</th>
							<th>地域</th>
							<th>操作</th>
						</tr>
					</thead>
					<tbody id='tb'>

					</tbody>
				</table>
				<div>
					<div id="layui"></div>
				</div>
			</div>
		</div>
	</div>
	<div class="cover4">
		<div class="tcc_content">
			<div class="tcc_title">查看上传文件</div>
			<div class="findfile hy_file">
			</div>
			<div class="findfile_an">
				<button type="button" class="layui-btn layui-btn-primary" onclick="close1()">关闭</button>
			</div>
		</div>
	</div>

	<script src="./layui/layui.js"></script>
	<script src="./js/layuicommon2.js"></script>
	<script src="./js/jquery.min.js"></script>
	<script src="./js/header.js"></script>
	<script src="./js/common.js"></script>
	<script src="./js/hyfind.js"></script>
	<!-- <script src="./js/commonheader.js"></script> -->
	<script>
		// 引的头部
		 $('header').load('./headerys.html');
		$('#test1').mouseleave(function(){
			$('#test1').css("visibility", "hidden");
		})
		$('#test2').mouseleave(function(){
			$('#test2').css("visibility", "hidden");
		})
		$(".tatou").css({ "background-color": "#059afe", "color": "white" });
		function close1() {
			$(".cover4").css("display", "none");
		}
		// layui.use('laypage', function () {
		// 	var laypage = layui.laypage;

		// 	//执行一个laypage实例
		// 	laypage.render({
		// 		elem: 'shuju' //注意，这里的 test1 是 ID，不用加 # 号
		// 		, count: 5 //数据总数，从服务端得到
		// 		, limit: 1
		// 	});
		// });
		let treedata = [];
		function wtf(data) {
			data.map(function(v, i){
				let obj = {};
				obj.title = v.areaName;
				obj.id = i;
				obj.children = [];
				v.childList.map(function(val, ind){
					let objc = {};
					objc.title = val.areaName;
					objc.id = i + '-' + ind;
					objc.children = [];
					val.childList.map(function(vv, ii){
						let objcc = {};
						objcc.title = vv.areaName;
						objcc.id = i + '-' + ind + '-' + ii;
						objc.children.push(objcc);
					})
					obj.children.push(objc);
				});
				treedata.push(obj);
			});
		}
		var data = {
		}
		base.commonAjax('clav/area/getAddressList', data, function (data) {
			if (data.code == 1) {
				//console.log("z", data);
				wtf(data.data);
				// console.log(treedata)
				layui.use('tree', function () {
					var tree = layui.tree;

					//渲染
					var inst1 = tree.render({
						elem: '#test1'  //绑定元素
						, click: function (obj) {
							// console.log(obj.data); //得到当前点击的节点数据
							// console.log(obj.elem); //得到当前节点元素 
							// console.log($('.layui-tree-set').attr("data-id"));
							//  console.log(obj.data.id); //得到当前点击的节点数据
							let str = obj.data.id;
							// console.log(str.indexOf('-')>-1);
							if (str.indexOf('-') > -1 && str.indexOf('-')) {
								let arr = str.split('-');
								if (arr.length == 3) {
									// console.log(arr);
									// console.log(treedata[arr[0]].title);
									// console.log(treedata[arr[0]].title);
									// console.log(obj.data.title);
									var place = treedata[arr[0]].title + "-" + treedata[arr[0]].title + "-" + obj.data.title;
									//console.log("地区",place);
									$('#szd').val(place);
									$('#test1').css("visibility", "hidden");
								}
							}
						}
						, data: treedata
					});

				});
			}
		});

//推荐单位
		let treedata2 = [];
		let treelocaldata = [];
		var data = {
		}
		base.commonAjax('clav/recommendUnit/getAllUnitList', data, function (data) {
			if (data.code == 1) {
				//console.log("z", data);
				treelocaldata = data.data;
				wtf2(data.data);
				// console.log(treedata)
				layui.use('tree', function () {
					var tree = layui.tree;
					//渲染
					var inst1 = tree.render({
						elem: '#test2'  //绑定元素
						, click: function (obj) {
							// console.log(obj);
							// console.log(obj.data); //得到当前点击的节点数据
							// console.log(obj.elem); //得到当前节点元素 
							// console.log($('.layui-tree-set').attr("data-id"));
							//  console.log(obj.data.id); //得到当前点击的节点数据
							let str = obj.data.id;
							console.log(String(str).indexOf('-'));
							// console.log(str.indexOf('-')>-1);

							if (String(str).indexOf('-') != -1) {

								let arr = str.split('-');
								if (arr.length == 2) {
									console.log(treelocaldata[Number(arr[0])].childList[Number(arr[1])]);
									recommendType14 = treelocaldata[Number(arr[0])].childList[Number(arr[1])].id;

									//console.log("推荐",ind1);
									//console.log(treedata2[arr[0]].title);
									// console.log(treedata[arr[0]].title);
									// console.log(obj.data.title);
									var tjplace2 = obj.data.title;
									//+treedata2[arr[0]].title;
									//console.log("地区",place);
									$('#tjdw').val(tjplace2);
									$('#test2').css("visibility", "hidden");
								}
								if (arr.length == 3) {
									//console.log(treelocaldata[Number(arr[0])].childList[Number(arr[1])].childList[Number(arr[2])].name);
									//ind1 = treelocaldata[Number(arr[0])].childList[Number(arr[1])].id;

									//console.log("推荐",arr);
									//console.log(treedata2[arr[0]].title);
									// console.log(treedata[arr[0]].title);
									// console.log(obj.data.title);
									var tjplace3 = treelocaldata[Number(arr[0])].childList[Number(arr[1])].childList[Number(arr[2])].name;
									recommendType14=treelocaldata[Number(arr[0])].childList[Number(arr[1])].childList[Number(arr[2])].id;
									//+treedata2[arr[0]].title;
									//console.log("地区",place);
									$('#tjdw').val(tjplace3);
									$('#test2').css("visibility", "hidden");
								}			
							} else {
								let arr = str;
								console.log(arr);
								console.log(treelocaldata[arr]);
								recommendType14 = treelocaldata[arr].id;

								//console.log("推荐",arr);
								//console.log(treedata2[arr[0]].title);
								// console.log(treedata[arr[0]].title);
								// console.log(obj.data.title);
								var tjplace2 = obj.data.title;
								//+treedata2[arr[0]].title;
								//console.log("地区",place);
								$('#tjdw').val(tjplace2);
								$('#test2').css("visibility", "hidden");

							}
						}
						, data: treedata2
					});

				});
			}
		});
				function wtf2(data) {
			data.map(function(v, i){
				let obj = {};
				obj.title = v.name;
				obj.id = i;
				obj.children = [];
				v.childList.map(function(val, ind){
					console.log(val);
					let objc = {};
					objc.title = val.name;
					objc.id = i + '-' + ind;
					objc.children = [];
					val.childList.map(function(al, nd){
						let objcc = {};
						objcc.title = al.name;
						objcc.id = i + '-' + ind+ '-' + nd;
						objcc.children = [];
						objc.children.push(objcc);
					})
					obj.children.push(objc);
				});
				treedata2.push(obj);
			});
		}
//=====================
		function findvip(name, memberNo, artTypeId, location,recommendType,orgIdentityId,sTime,eTime) {
			var name;
			var memberNo;
			var artTypeId;
			var location;
			var sTime;
			var eTime;
			var orgIdentityId;
			var recommendType;
			var data = {
				name: name,
				memberNo: memberNo,
				artTypeId: artTypeId,
				location: location,
				recommendType:recommendType,
				orgIdentityId:orgIdentityId,
				sTime:sTime,
				eTime:eTime
			}
			base.commonAjax('clav/member/getClavMemberList4', data, function (data) {
				
				//console.log('数据id',data);
				var txdc=[];
				for (var z=0;z<data.data.length;z++) {
					txdc.push(data.data[z].id)
					//console.log("1")
				}
				sjtxdc=txdc.join();
				//console.log("ID",sjtxdc)
				var pagedata = [];
				pagedata = data.data;
				//console.log(pagedata)

				//调用分页
				layui.use(['laypage', 'layer'], function () {
					var laypage = layui.laypage
						, layer = layui.layer;

					laypage.render({
						elem: 'layui'
						, count: pagedata.length,
						layout: ['count', 'prev', 'page', 'next', 'limit', 'skip'],
						limit: 10,
						jump: function (obj) {
							//模拟渲染
							document.getElementById('tb').innerHTML = function () {
								var arr = []
									, thisData = pagedata.concat().splice(obj.curr * obj.limit - obj.limit, obj.limit);
								layui.each(thisData, function (index, item) {
									arr.push(auto(index, item));
									//console.log(item);
								});
								return arr.join('');
							}();
						}
					});
				});
			});
		}
		
		
		// function findvip2(name, memberNo, artTypeId, location,recommendType,orgIdentityId,sTime,eTime) {
		// 	var name;
		// 	var memberNo;
		// 	var artTypeId;
		// 	var location;
		// 	var sTime;
		// 	var eTime;
		// 	var orgIdentityId=9;
		// 	var recommendType;
		// 	var data = {
		// 		name: name,
		// 		memberNo: memberNo,
		// 		artTypeId: artTypeId,
		// 		location: location,
		// 		recommendType:recommendType,
		// 		orgIdentityId:orgIdentityId,
		// 		sTime:sTime,
		// 		eTime:eTime
		// 	}
		// 	base.commonAjax('clav/member/getClavMemberList2', data, function (data) {
		// 		var pagedata = [];
		// 		console.log(data);
		// 		pagedata = data.data;
		// 		console.log(pagedata)

		// 		//调用分页
		// 		layui.use(['laypage', 'layer'], function () {
		// 			var laypage = layui.laypage
		// 				, layer = layui.layer;

		// 			laypage.render({
		// 				elem: 'layui'
		// 				, count: pagedata.length,
		// 				layout: ['count', 'prev', 'page', 'next', 'limit', 'skip'],
		// 				limit: 10,
		// 				jump: function (obj) {
		// 					//模拟渲染
		// 					document.getElementById('tb').innerHTML = function () {
		// 						var arr = []
		// 							, thisData = pagedata.concat().splice(obj.curr * obj.limit - obj.limit, obj.limit);
		// 						layui.each(thisData, function (index, item) {
		// 							arr.push(auto(index, item));
		// 							//console.log(item);
		// 						});
		// 						return arr.join('');
		// 					}();
		// 				}
		// 			});
		// 		});
		// 	});
		// }
		findvip();
		layui.use('form', function () {
			var form = layui.form; //只有执行了这一步，部分表单元素才会自动修饰成功
			form.on('select(yishu)', function (data) {
				category = data.value;
				yishu = data.elem[data.elem.selectedIndex].text;
				form.render('select');
			})
			form.on('select(zzsf)', function (data) {
				category2 = data.value;
				zzsf = data.elem[data.elem.selectedIndex].text;
				form.render('select');
			})
		})
		//日期
		layui.use('laydate', function () {
			var laydate = layui.laydate;
			//日期
			laydate.render({
				elem: '#date'
			});
			laydate.render({
				elem: '#date1'
			});
			function useLayDateMultiple(cls) {
				layui.use('laydate', function () {
					var laydate = layui.laydate;

					lay('#' + cls).each(function () {
						laydate.render({
							elem: this
							, trigger: 'click'
							, format: 'yyyy/MM/dd HH:mm:ss'
							, done: function (value, datetime, endDate) {
								timechecked4 = value;
								bjtime4 = timechecked4.split(/\s+/)[0].replace(/\//g, "");
								console.log(bjtime4);
							}
						});
					});
				});
			}

			function useLayDateMultiple2(cls) {
				layui.use('laydate', function () {
					var laydate = layui.laydate;
					lay('#' + cls).each(function () {
						laydate.render({
							elem: this,
							trigger: 'click'
							, format: 'yyyy/MM/dd HH:mm:ss'
							, done: function (value, datetime, endDate) {
								timechecked3 = value;
								bjtime3 = timechecked3.split(/\s+/)[0].replace(/\//g, "");
								console.log(bjtime3);
							}
						});
					});
				});
			}
			useLayDateMultiple('time1'); useLayDateMultiple2('time2');
		});

		//查询
		$('#tjfind').on('click', function (){
			var name;
			var memberNo;
			var artTypeId;
			var location;
			var recommendType;
			var sTime;
			var eTime;
			var orgIdentityId;
			//console.log(eTime);
			//console.log( $("#vipname").val())
			//console.log( $("#vipnumber").val())
			//console.log( $("#szd").val())
			if ($("#vipname").val() != '') {
				name = $("#vipname").val();
			}
			if ($("#vipnumber").val() != '') {
				memberNo = $("#vipnumber").val();
			}
			if ($("#yishu").val() != '') {
				artTypeId = category
				//console.log(artTypeId)
			}
			if ($("#szd").val() != '') {
				location = $("#szd").val();
			}
			if ($("#tjdw").val() != '') {
				recommendType = recommendType14;
				//console.log(recommendType)
			}
			if ($("#zzsf").val() != '') {
				orgIdentityId = category2;
				//console.log(recommendType)
			}
			if ($('#time1').val() != '') {
				sTime =  timechecked4;
				console.log(sTime)
			}
			if ($('#time2').val() != '') {
				eTime = timechecked3;
				//console.log(recommendType)
			}
			if(($('#time1').val() != '')&&($('#time2').val() != '')){
				if(bjtime3<bjtime4){
				 alert("结束时间不能小于开始时间")
				 return false;
			 }
			}
			// if(bjtime2<bjtime1){
			// 	alert("结束时间不能小于开始时间")
			// }
			//location=$("#szd").val();
			//console.log(category)
			//artTypeId=category
			//console.log("xxx",orgIdentityId)
			findvip(name, memberNo, artTypeId, location, recommendType,orgIdentityId,sTime,eTime);
		})
		function tjfind() {

		}
		function auto(index, obj) {
			return '<tr>' +
				'<td style="width: 50px">' +
				'<input type="checkbox" name="" title="" lay-skin="primary" class="s" value="' + obj.id + '">' +
				'</td>' +
				'<td>' + (index + 1) + '</td>' +
				'<td>' + obj.memberNo + '</td>' +
				'<td>' + obj.name + '</td>' +
				'<td>' + (obj.createDate).split(/\s+/)[0] + '</td>' +
				'<td>' + obj.relationshipGroup + '</td>' +
				'<td>' + obj.orgIdentityStr + '</td>' +
				'<td>' + obj.artStr + '</td>' +
				'<td>' + obj.location + '</td>' +
				'<td>' +
				'<button id="' + 'hy_edit' + obj.id + '"class="layui-btn hy_edit">编辑</button>' +
				'<a><button id="' + 'hy_find' + obj.id + '"class="layui-btn layui-btn-normal hy_find">查看</button></a>' +
				'<a href=http://39.98.186.243/clav/exportExcel/downloadsExcelDown?ids='+obj.id+' download=""><button id="' + 'hy_daochu' + obj.id + '"class="layui-btn layui-btn-normal hy_daochu">导出</button></a>' +
				'<a><button id="' + 'hy_move' + obj.id + '"class="layui-btn layui-btn-warm hy_move" onclick="remove_z(' + obj.id + ')">移除</button></a>' +
				'<a><button id="' + 'hy_repass' + obj.id + '"class="layui-btn layui-btn-danger hy_repass" onclick="repass_z(' + obj.id + ')">重置密码</button></a>' +
				'</td>' +
				'</tr>'
		}
				// 会员查询 按钮编辑
				$(document).on('click', '.hy_edit', function () {
			// console.log(id);
			var hy_edit = $(this).attr('id').replace("hy_edit", "");
			window.location.href="./newvip2_z.html?id="+hy_edit;
		})
		// 会员查询 按钮查看
		$(document).on('click', '.hy_find', function () {
			// console.log(id);
			var hy_find = $(this).attr('id').replace("hy_find", "");
			$(".cover4").css("display", "inline-block");
			var data = {
				id: hy_find
			}
			base.commonAjax('clav/member/chakanClavMember', data, function (data) {
				if (data.code == 1) {
					console.log("会员文件", data)
					$(".hy_file").empty();
					if(data.data.uploadFile!=null){
						$('.hy_file').append(
						'<a href="' + data.data.uploadFile + '" download="'+data.data.name+''+''+data.data.memberNo+'.pdf">' +
						'<div class="wj">'+data.data.name+''+''+data.data.memberNo+'</div>' +
						'</a>'
					);
					}else{
						$('.hy_file').append(
						'<a href="newvip3_z.html?id='+hy_find+'">' +
						'<div class="wj">'+data.data.name+''+''+data.data.memberNo+'</div>' +
						'</a>'
					);
					}
					
				}
			})
		})
		// 会员查询 按钮移除
		// $(document).on('click', '.hy_move', function () {
		// 	// console.log(id);
		// 	var hy_move = $(this).attr('id').replace("hy_move", "");
		// 	var data = {
		// 		id: hy_move
		// 	}
		// 	console.log("yichu", data)
		// 	base.commonAjax('clav/member/yichuClavMember', data, function (data) {
		// 		if (data.code == 1) {
		// 			findvip();
		// 		}
		// 	})
		// })
		// 会员查询 按钮移除
		function remove_z(reid){
			var hy_move =reid;
			var data = {
				id: hy_move
			}
			//console.log("yichu", data)
			base.commonAjax('clav/member/yichuClavMember', data, function (data) {
				if (data.code == 1) {
					findvip();
					alert('删除成功')
				}
				else{
					alert(data.message)
				}
			})
		}
		// 会员查询 重置密码
		// $(document).on('click', '.hy_repass', function () {
		// 	// console.log(id);
		// 	var hy_repass = $(this).attr('id').replace("hy_repass", "");
		// 	var data = {
		// 		id: hy_repass
		// 	}
		// 	base.commonAjax('clav/member/resetClavMember', data, function (data) {
		// 		if (data.code == 1) {
		// 			alert("重置密码为：" + data.data)
		// 			//console.log(data)
		// 		}
		// 	})
		// })
		// 会员查询 重置密码
		function repass_z(rpid){
			var hy_repass=rpid;
			var data = {
				id: hy_repass
			}
			base.commonAjax('clav/member/resetClavMember', data, function (data) {
				if (data.code == 1) {
					alert("重置密码为：" + data.data)
					//console.log(data)
				}else{
					alert(data.message)
				}
			})
		}
		$('#szd').click(function () {
			$('#test1').css("visibility", "visible");
		})
		$('#tjdw').click(function () {
			$('#test2').css("visibility", "visible");
		})
		$('#btnclear').click(function () {
			$('#vipname,#vipnumber,#arttype,#szd,#time1,#time2,#tjdw,#zzsf').val('');
			//$('#arttype,#zzsf').empty();
			//form.render("select");
		})
		layui.use('form', function () {
			var form = layui.form; //只有执行了这一步，部分表单元素才会自动修饰成功
			form.on('#btnclear', function (elem) {
				//执行清空
				$("#arttype").empty();
				form.render();
			});

		})

		function z_qk(){
			$('#time1').val('');
			$('#time2').val('');
		}

		$("#checkAll").click(function(){
			   $("input[type='checkbox']").prop("checked",$("#checkAll").is(':checked'));
		})
		function jqchk(){ //jquery获取复选框值
		    var chk_value =[];
		    $('input[class="s"]:checked').each(function(){
		    chk_value.push($(this).val());
		    });
		    if(chk_value==''){
		    	alert('请选择')
		    	return false;
		    }
		 	console.log("选中的值",chk_value)
		 	
		let url = 'http://39.98.186.243/clav/exportExcel/downloadsExcelDown?ids='+chk_value+''
      if (this.isIE()) { // IE
        window.open(url, '_blank')
      } else {
        let a = document.createElement('a') // 创建a标签
        let e = document.createEvent('MouseEvents') // 创建鼠标事件对象
        e.initEvent('click', false, false) // 初始化事件对象
        a.href = url // 设置下载地址
        a.download = '' // 设置下载文件名
        a.dispatchEvent(e)
      }
		 	
		}
		function isIE () {
		      if (!!window.ActiveXObject || 'ActiveXObject' in window) {
		        return true
		      } else {
		        return false
		      }
		    }
			
		function tec(){		
			let url = 'http://39.98.186.243/clav/exportExcel/downloadsExcelDown?ids='+sjtxdc+''
      if (this.isIE()) { // IE
        window.open(url, '_blank')
      } else {
        let a = document.createElement('a') // 创建a标签
        let e = document.createEvent('MouseEvents') // 创建鼠标事件对象
        e.initEvent('click', false, false) // 初始化事件对象
        a.href = url // 设置下载地址
        a.download = '' // 设置下载文件名
        a.dispatchEvent(e)
      }
		}
	</script>
</body>

</html>