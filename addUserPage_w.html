<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>理事调整</title>
    <link rel="stylesheet" href="./layui/css/layui.css">
    <link rel="stylesheet" href="./css/newfind.css">
    <link rel="stylesheet" href="./css/header.css">
    <link rel="stylesheet" href="./css/yyui.css">
    <style>
        
    #zyzgl{
        border-bottom: 5px solid rgba(147, 209, 255,1);
    }

    .content_nav{
        position: relative;
    }
    .c_n_title{
        position: absolute;
        top:20px;
        right:0;
        width: 100px;
        height: 30px;
        background: #3195FF;
        text-align: center;
        line-height: 30px;
        color:#fff;
        border-radius: 4px;
        cursor:pointer;
    }
    .c_n_title a{
        color:#fff;
    }
    .content_navl{
        margin-bottom: 20px;
    }
    .layui-form-label {
    padding: 6px 15px;
}
    </style>
</head>

<body>
        <!-- 头部 -->
        	<!-- 头部 -->
		<header></header>
	<!-- <div class="headerpage">
           
        </div> -->
    <!-- 内容 -->

    <div class="content">
            <div class="content_nav">
                <div class="content_navl"><span><i
                            class="layui-icon layui-icon-home"></i>首页&nbsp;&nbsp;</span>/<span>&nbsp;志愿者管理&nbsp;&nbsp;</span>/&nbsp;理事调整
                </div>
                <div class="c_n_title" onclick="down()">下载申请表</div>
                <form class="layui-form" action="">
                    <div class="grinfo">
                        <div class="grinfot">个人基本认证信息</div>
                        <div class="grinfoc">
                            <div class="layui-container">
                                <div class="layui-fluid">
                                    <div class="layui-row layui-col-space5">
                                        <div class="layui-col-md4">
                                            <div class="grid-demo grid-demo-bg1">
                                                <div class="layui-form-item">
                                                    <label class="layui-form-label"><span>*</span>姓名：</label>
                                                    <div class="layui-input-block">
                                                        <input type="text" name="title" lay-verify="title" id="username"
                                                            autocomplete="off" placeholder="姓名" class="layui-input inpList">
                                                            <div class="warn w_xm"></div>
                                                    </div>
                                                </div>
                                                <div class="layui-form-item">
                                                    <label class="layui-form-label"><span>*</span>身份证号：</label>
                                                    <div class="layui-input-block">
                                                        <input type="text" name="title" lay-verify="title" id="sfnumber"
                                                            autocomplete="off" placeholder="身份证号" class="layui-input inpList">
                                                            <div class="warn w_sf"></div>
                                                    </div>
                                                </div>
                                                <div class="layui-form-item">
                                                    <label class="layui-form-label"><span>*</span>性别：</label>
                                                    <div class="layui-input-block">
                                                        <input type="text" name="title" lay-verify="title" id="sex"
                                                            onclick="sexfind()" autocomplete="off" readonly="readonly"
                                                            placeholder="（读取身份证号）" class="layui-input inpList">
                                                            <div class="warn w_xb"></div>
                                                    </div>
                                                </div>
                                                <div class="layui-form-item">
                                                    <label class="layui-form-label"><span>*</span>手机号码：</label>
                                                    <div class="layui-input-block">
                                                        <input type="text" name="title" lay-verify="title" id="tec"
                                                            autocomplete="off" placeholder="手机号码" class="layui-input inpList">
                                                            <div class="warn w_sj"></div>
                                                    </div>
                                                </div>
                                                <div class="flex_box">
                                                    <label class="layui-form-label"><span>*</span>政治面貌：</label>
                                                    <div class="layui-input-inline zzmm2">
                                                        <select name="hy" lay-verify="required" lay-search="" class="inpList"
                                                            id="politicsStatusId" lay-filter="politicsStatusIdd">
                                                            <option value="">请选择</option>
                                                            <!-- <option value="1">layer</option>
                                                            <option value="2">form</option> -->
                                                        </select>
                                                        <div class="warn w_zz"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="layui-col-md4">
                                            <div class="grid-demo">
                                                <div class="mz flex_box">
                                                    <label class="layui-form-label"><span>*</span>民族：</label>
                                                    <div class="layui-input-inline mz2">
                                                        <select name="hy" lay-verify="required" lay-search="" class="inpList" lay-filter="mz3" id="mz3">
                                                            <option value="">请选择</option>
                                                            <!-- <option value="1">layer</option>
                                                            <option value="2">form</option> -->
                                                        </select>
                                                        <div class="warn w_mz"></div>
                                                    </div>
                                                </div>
                                                <div class="layui-form-item" style="margin-top: 5px;">
                                                    <label class="layui-form-label">艺名(笔名)：</label>
                                                    <div class="layui-input-block">
                                                        <input type="text" name="title" lay-verify="title" id="username2"
                                                            autocomplete="off" placeholder="艺名（笔名）" class="layui-input inpList">
                                                    </div>
                                                </div>
                                                <div class="layui-form-item" style="margin-top: 5px;">
                                                    <label class="layui-form-label"><span>*</span>出生日期：</label>
                                                    <div class="layui-input-block">
                                                        <input type="text" name="title" lay-verify="title" id="sr"
                                                            onclick="birthfind()" autocomplete="off" readonly="readonly"
                                                            placeholder="（读取身份证号）" class="layui-input inpList">
                                                            <div class="warn w_sr"></div>
                                                    </div>
                                                </div>
                                                <div  class="flex_box">
                                                    <label class="layui-form-label"><span>*</span>籍贯：</label>
                                                    <div class="layui-input-inline jg2">
                                                        <select name="hy" lay-verify="required" class="inpList" lay-search="" id="jg" lay-filter="jg">
                                                            <option value="">请选择</option>
                                                            <!-- <option value="1">layer</option>
                                                            <option value="2">form</option> -->
                                                        </select>
                                                        <div class="warn w_jg"></div>
                                                    </div>
                                                </div>
                                                <div class="layui-form-item xinwenti" style="margin-top: 2px;">
                                                    <label class="layui-form-label" style="padding-top: 10px;"><span>*</span>新文艺群体:</label>
                                                    <div class="layui-input-block">
                                                        <input type="radio"  class="wy1" name="sex" value="是" title="是" data="1"
                                                            checked="">
                                                        <input type="radio" class="wy2" name="sex" value="否" title="否" data="2">
                                                    </div>
                                                </div>
    
                                            </div>
                                        </div>
                                        <div class="layui-col-md4 headp">
                                            <div class="grid-demo grid-demo-bg1">
                                                <div class="headimg" style="padding: 4px;">
                                                    <img src="./img/head.png" alt="" id="show">
                                                </div>
                                                <div style="position: relative"><span>*</span>点击上传个人近期白底免冠照
                                                    <div class="warn w_tx"></div>
                                                    <div class="file">
                                                        <input type="file" name="file" id="file" class="" accept="image/*"
                                                            onchange="changepic(this)">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="qtinfo">
                        <div class="qtinfot">其他基本信息</div>
                        <div class="qtinfoc">
                            <div class="layui-container-fluid">
                                <div class="layui-fluid">
                                    <div class="layui-row layui-col-space5">
                                        <div class="layui-col-md4">
                                            <div class="grid-demo grid-demo-bg1">
                                                <div class="grid-demo">
                                                    <label class="layui-form-label"><span>*</span>现所在地:</label>
                                                    <div class="layui-input-block">
                                                        <input type="text" name="title" lay-verify="title" id="szd"
                                                            autocomplete="off" placeholder="现所在地" class="layui-input inpList">
                                                            <div class="warn w_sz"></div>
                                                    </div>
                                                    <div id="test1"></div>
                                                </div>
                                                <div class="layui-form-item tec">
                                                    <label class="layui-form-label">办公电话:</label>
                                                    <div class="layui-input-block">
                                                        <input type="text" name="title" lay-verify="title" id="bgtec"
                                                            autocomplete="off" placeholder="办公电话" class="layui-input inpList">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="layui-col-md5">
                                            <div class="grid-demo">
                                                <div class="layui-form-item">
                                                    <label class="layui-form-label"><span>*</span>通讯地址：</label>
                                                    <div class="layui-input-block" >
                                                        <input type="text" name="title" lay-verify="title" id="place"
                                                            autocomplete="off" placeholder="通讯地址" class="layui-input inpList" >
                                                            <div class="warn w_tx2"></div>
                                                    </div>
                                                </div>
                                                <div class="layui-form-item">
                                                    <label class="layui-form-label">电子邮箱：</label>
                                                    <div class="layui-input-block" >
                                                        <input type="text" name="title" lay-verify="title" id="email"
                                                            autocomplete="off" placeholder="电子邮箱" class="layui-input inpList" >
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="layui-col-md3">
                                            <div class="grid-demo grid-demo-bg1">
                                                <div class="layui-form-item">
                                                    <label class="layui-form-label"><span>*</span>通讯邮编：</label>
                                                    <div class="layui-input-block" style="width: 155px;">
                                                        <input type="text" name="title" lay-verify="title" id="placenum"
                                                            autocomplete="off" placeholder="通讯邮编" class="layui-input inpList">
                                                            <div class="warn w_yb"></div>
                                                    </div>
                                                </div>
                                                <div class="layui-form-item">
                                                    <label class="layui-form-label">微信号：</label>
                                                    <div class="layui-input-block"style="width: 155px;">
                                                        <input type="text" name="title" lay-verify="title" id="weixinnum"
                                                            autocomplete="off" placeholder="微信号" class="layui-input inpList">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="gzinfo">
                        <div class="gzinfot">工作教育信息</div>
                        <div class="gzinfoc">
                            <div class="layui-container-fluid">
                                <div class="layui-fluid">
                                    <div class="layui-row layui-col-space5">
                                        <div class="layui-col-md4">
                                            <div class="grid-demo grid-demo-bg1">
                                                <div class="grid-demo">
                                                    <label class="layui-form-label"><span>*</span>文化程度:</label>
                                                    <div class="layui-input-inline diqu">
                                                        <select name="quiz1" id="whcd" lay-filter="whcd" class="inpList">
                                                            <option value="">请选择</option>
                                                            <!-- <option value="浙江" selected="">浙江省</option>
                                                            <option value="你的工号">江西省</option>
                                                            <option value="你最喜欢的老师">福建省</option> -->
                                                        </select>
                                                        <div class="warn w_wh"></div>
                                                    </div>
    
                                                </div>
                                            </div>
                                        </div>
                                        <div class="layui-col-md4">
                                            <div class="grid-demo grid-demo-bg1">
                                                <div class="grid-demo">
                                                    <label class="layui-form-label"><span>*</span>专业职称:</label>
                                                    <div class="layui-input-inline diqu">
                                                        <select name="quiz1" id="zyzc" lay-filter="zyzc" class="inpList">
                                                            <option value="">请选择</option>
                                                            <!-- <option value="浙江" selected="">浙江省</option>
                                                            <option value="你的工号">江西省</option>
                                                            <option value="你最喜欢的老师">福建省</option> -->
                                                        </select>
                                                        <div class="warn w_zc"></div>
                                                    </div>
    
                                                </div>
                                            </div>
                                        </div>
                                        <div class="layui-col-md4">
                                            <div class="grid-demo">
                                                <div class="layui-form-item">
                                                    <label class="layui-form-label">毕业院校</label>
                                                    <div class="layui-input-block">
                                                        <input type="text" name="title" lay-verify="title" id="school"
                                                            autocomplete="off" placeholder="毕业院校" class="layui-input inpList"
                                                            style="width:183px;">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
    
                                        <div class="layui-col-md7">
                                            <div class="grid-demo grid-demo-bg1">
                                                <div class="layui-form-item tec">
                                                    <label class="layui-form-label"><span>*</span>工作单位及职务:</label>
                                                    <div class="layui-input-block">
                                                        <input type="text" name="title" lay-verify="title" id="work"
                                                            autocomplete="off" placeholder="请输入工作单位及职务" class="layui-input inpList">
                                                            <div class="warn w_gzdw"></div>
                                                    </div>
                                                </div>
                                                <div class="layui-form-item tec">
                                                    <label class="layui-form-label">全国文艺家协会职务:</label>
                                                    <div class="layui-input-block">
                                                        <input type="text" name="title" lay-verify="title" id="qgwork"
                                                            autocomplete="off" placeholder="请输入全国文艺家协会职务（含中国作协和中国评协）"
                                                            class="layui-input inpList">
                                                    </div>
                                                </div>
                                                <div class="layui-form-item tec">
                                                    <label class="layui-form-label">其他主要社会职务:</label>
                                                    <div class="layui-input-block">
                                                        <input type="text" name="title" lay-verify="title" id="qtwork"
                                                            autocomplete="off" placeholder="请输入其他主要社会职务"
                                                            class="layui-input inp inpList">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="layui-col-md9">
                                            <div class="grid-demo">
                                                <div class="layui-form-item">
                                                    <label class="layui-form-label"><span>*</span>工作经历（艺术简历）:</label>
                                                    <div class="layui-input-block">
                                                        <textarea placeholder="请输入工作经历（艺术简历），300字以内" id="experience"
                                                            class="layui-textarea inpList"></textarea>
                                                            <div class="warn w_jl"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="zyinfo">
                        <div class="zyinfot">志愿服务信息</div>
                        <div class="zyinfoc">
                            <div class="layui-container-fluid">
                                <div class="layui-fluid">
                                    <div class="layui-row layui-col-space5">
                                        <div class="layui-col-md4">
                                            <div class="grid-demo grid-demo-bg1">
                                                <div class="layui-form-item tec">
                                                    <label class="layui-form-label"><span>*</span>主要从事的艺术门类：</label>
                                                    <div class="layui-input-inline">
                                                        <select name="hy" lay-verify="required" class="inpList" lay-search="" id="ysml" lay-filter="ysml">
                                                            <option value="">请选择</option>
                                                            <!-- <option value="1">layer</option>
                                                            <option value="2">form</option> -->
                                                        </select>
                                                        <div class="warn w_yis"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="layui-col-md4">
                                            <div class="grid-demo grid-demo-bg1">
                                                <div class="layui-form-item tec">
                                                    <label class="layui-form-label">具体领域：</label>
                                                    <div class="layui-input-block">
                                                        <input type="text" name="title" lay-verify="title" id="genre"
                                                            autocomplete="off" placeholder="具体领域：" class="layui-input inpList"
                                                            style="width:190px;">
                                                            <i class="layui-icon layui-icon-add-circle jiah" style="float: right;font-size: 30px; color: #059afe;"></i>
                                                    </div>                                               
                                                </div>
                                            </div>
                                        </div>
                                        <div class="layui-col-md12  ewai" style="display: none;">
                                            <div class="layui-col-md4">
                                                <div class="grid-demo grid-demo-bg1">
                                                    <div class="layui-form-item tec">
                                                        <label class="layui-form-label">主要从事的艺术门类：</label>
                                                        <div class="layui-input-inline">
                                                            <select name="hy" lay-verify="required" class="inpList" lay-search="" id="ysml2" lay-filter="ysml2">
                                                                <option value="">请选择</option>
                                                                <!-- <option value="1">layer</option>
                                                                <option value="2">form</option> -->
                                                            </select>
                                                            <div class="warn w_yis"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="layui-col-md4">
                                                <div class="grid-demo grid-demo-bg1">
                                                    <div class="layui-form-item tec">
                                                        <label class="layui-form-label">具体领域：</label>
                                                        <div class="layui-input-block">
                                                            <input type="text" name="title" lay-verify="title" id="genre2"
                                                                autocomplete="off" placeholder="具体领域：" class="layui-input inpList"
                                                                style="width:190px;">
                                                        </div>                                               
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="layui-col-md9">
                                            <div class="grid-demo">
                                                <div class="layui-form-item">
                                                    <label class="layui-form-label"><span>*</span>文艺志愿服务或公益活动经历：</label>
                                                    <div class="layui-input-block">
                                                        <textarea placeholder="请输入文艺志愿服务或公益活动经历，300字以内" id="experience2"
                                                            class="layui-textarea inpList"></textarea>
                                                            <div class="warn w_gyhd"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tjinfo">
                        <div class="tjinfot">推荐类型信息</div>
                        <div class="tjinfoc">
                            <div class="layui-container-fluid">
                                <div class="layui-fluid">
                                    <div class="layui-row layui-col-space5">
                                            <div class="layui-col-md4">

                                                    <label class="layui-form-label"><span>*</span>推荐类型：</label>
                                                    <div class="layui-input-inline tjlx">
                                                        <!-- <select name="hy" lay-verify="required" lay-search="" id="tjtype">
                                                            <option value="">请选择</option>
                                                            <option value="1">layer</option>
                                                            <option value="2">form</option>
                                                        </select> -->
                                                        <input type="text"class="layui-input inpList" id="tjtype">
                                                        <div class="warn w_lx"></div>
                                                    </div>
                                                    <div id="test2"></div>
            
                                                </div>
                                                <div class="layui-col-md4">
                                                    <label class="layui-form-label"><span>*</span>推荐单位/人：</label>
                                                    <div class="layui-input-inline tjr">
                                                        <select name="hy" lay-verify="required" class="inpList" lay-search="" id="tjcompany" lay-filter="tjcompany"> 
                                                            <option value="">请选择</option>
                                                            <!-- <option value="1">layer</option>
                                                            <option value="2">form</option> -->
                                                        </select>
                                                        <div class="warn w_tjdw"></div>
                                                    </div>
            
                                                </div>
                                        <div class="layui-col-md12">
                                            <div class="layui-col-md4">
                                                <div class="grid-demo grid-demo-bg1">
                                                    <div class="layui-form-item tec">
                                                        <label class="layui-form-label"><span>*</span>联系人：</label>
                                                        <div class="layui-input-block">
                                                            <input type="text" name="title" lay-verify="title"
                                                                id="lxpeople" autocomplete="off" placeholder="联系人"
                                                                class="layui-input inpList" style="width:254px;">
                                                                <div class="warn w_lxr"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="layui-col-md4">
                                                <div class="grid-demo grid-demo-bg1">
                                                    <div class="layui-form-item tec">
                                                        <label class="layui-form-label"><span>*</span>手机号：</label>
                                                        <div class="layui-input-block">
                                                            <input type="text" name="title" lay-verify="title" id="sjh"
                                                                autocomplete="off" placeholder="手机号" class="layui-input inpList"
                                                                style="width:254px;">
                                                                <div class="warn w_sjh"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="anniu">
                        <button type="button" class="layui-btn layui-btn-normal" onclick="tijiao()">保存草稿</button>
                        <button type="reset" class="layui-btn layui-btn-primary reback">退回</button>
                    </div>
                </form>
            </div>
        </div>
    <script src="./layui/layui.js"></script>
    <script src="./js/layuicommon.js"></script>
    <script src="./js/jquery.min.js"></script>
    <script src="./js/common.js"></script>
    <script src="./js/header.js"></script>
    <script src="./js/newvip4.js"></script>
	<script src="./js/commonheader.js"></script>
	<script>
        //$('.headerpage').html(commHeader.header);
        $('header').load('./headerys.html');
        let treedata = [];
        let treedata2 = [];
        let treelocaldata = [];



        let idnumber = sessionStorage.getItem('idNumber');
        let idname = sessionStorage.getItem('nameid');

        
       //获取URL数据  
       function getQueryString() {

var url = location.search; //获取url中"?"符后的字串
var theRequest = new Object();
if (url.indexOf("?") != -1) {
            var str = url.substr(1);
            strs = str.split("&");
            for (var i = 0; i < strs.length; i++) {
                theRequest[strs[i].split("=")[0]] = unescape(strs[i].split("=")[1]);
            }
        }
        return theRequest;
    }

let idss = getQueryString('id').id;
  if(idss){
    layui.use('form', function(){
  var form = layui.form; //只有执行了这一步，部分表单元素才会自动修饰成功
      $('.pop_up').hide();
      let myid = getQueryString('id').id;
      
      setTimeout(() => {
        base.commonAjax('clav/member/getClavMemberList', {id:myid}, function (res) {
        console.log(res.data[0]);
        let obj =   res.data[0];
        $('#username').val(obj.name);
        $('#sfnumber').val(obj.idNumber);
        $('#sex').val(obj.gender == 1 ? '男': '女');
        $('#tec').val(obj.phone);
        $('#politicsStatusId').val(obj.politicsStatusId);
        politicsStatusIdd = obj.politicsStatusId;
        $('#mz3').val(obj.nation);
        mz3=obj.nation;
        $('#username2').val(obj.penName);
        $('#sr').val(obj.birthday);
        $('#jg').val(Number(obj.nativePlace)); 
        jg = obj.nativePlace;
          var radio = document.getElementsByName("sex");
          if (obj.isNewGroup == 1) {
              $(radio[0].click());
          }
          if (obj.isNewGroup == 2) {
              $(radio[1].click());
          }
           //console.log($('#file').val());
           document.getElementById('show').src = obj.avatar;
           picurl = obj.avatar;
        $('#szd').val(obj.location);
        $('#bgtec').val(obj.officePhone);
        $('#place').val(obj.postalAddress);
        $('#email').val(obj.email);
        $('#placenum').val(obj.postcode);
        $('#weixinnum').val(obj.wechatNumber);
        $('#whcd').val(obj.educationLevelId);;
        whcd=obj.educationLevelId;
        $('#zyzc').val(obj.professionalTitleId);
        zyzc=obj.professionalTitleId;
        
        $('#school').val(obj.graduateSchool);
        $('#work').val(obj.unitAndDuty);
        $('#qgwork').val(obj.associationDuty);
        $('#qtwork').val(obj.socialDuty);
        $('#experience').val(obj.workExperience);
        // $('#ysml').val(obj.workExperience);
         let ysarr = obj.artTypeId.split(',');  
         ysml = Number(ysarr[0]);
        $('#ysml').val(Number(ysarr[0]));
        if(ysarr[1]){
            ysml2 = Number(ysarr[1]);
        $('#ysml2').val(Number(ysarr[1]));
        }
        let lyarr = obj.specificAreas.split(',');
        // console.log(lyarr[0])
        // console.log(lyarr[0].indexOf('-'))
        // console.log(lyarr[0].substring(lyarr[0].indexOf('-')+1));
        $('#genre').val(lyarr[0].substring(lyarr[0].indexOf('-')+1));
       if(lyarr[1]){
        $('#genre2').val(lyarr[1].substring(lyarr[1].indexOf('-')+1));
       }
       $('#experience2').val(obj.activityExperience);
       //recommendType
       console.log(treelocaldata);
       let tid = obj.tjTypeId;
       $('#tjtype').val(obj.recommendType);
          console.log(tid);
          if (tid) {
              base.commonAjax('clav/recommendUnit/getRecommendUnitOrPeople', {id:tid}, function (res) {
                  //console.log(res);
                  layui.use('form', function () {
                      var form = layui.form; //只有执行了这一步，部分表单元素才会自动修饰成功
                      for (var i = 0; i < res.data.length; i++) {
                          $('#tjcompany').append(
                              '<option value="' + res.data[i].id + '">' + res.data[i].name + '</option>'
                          );
                      }
                       form.render();
                  });
                });
              }
             
             setTimeout(() => {
                $('#tjcompany').val(obj.tjUnitId);form.render();
             }, 1000);
              tjcompany = obj.relationshipGroup;
              $('#lxpeople').val(obj.linkman);
              $('#sjh').val(obj.linkmanPhone);
            
     });
      }, 1000);

    });
  }

  //========================================================================

        function changepic(obj) {
            //console.log(obj.files[0]);//这里可以获取上传文件的name
            var newsrc = getObjectURL(obj.files[0]);
            document.getElementById('show').src = newsrc;
        }
        //建立一個可存取到該file的url
        function getObjectURL(file) {
            var url = null;
            // 下面函数执行的效果是一样的，只是需要针对不同的浏览器执行不同的 js 函数而已
            if (window.createObjectURL != undefined) { // basic
                url = window.createObjectURL(file);
            } else if (window.URL != undefined) { // mozilla(firefox)
                url = window.URL.createObjectURL(file);
            } else if (window.webkitURL != undefined) { // webkit or chrome
                url = window.webkitURL.createObjectURL(file);
            }
            return url;
        }
        $('.reback').on('click',function(){
            history.go(-1);
        })
        function wtf(data) {
            data.map((v, i) => {
                let obj = {};
                obj.title = v.areaName;
                obj.id = i;
                obj.children = [];
                v.childList.map((val, ind) => {
                    let objc = {};
                    objc.title = val.areaName;
                    objc.id = i+'-'+ind;
                    objc.children = [];
                    val.childList.map((vv, ii) => {
                        let objcc = {};
                        objcc.title = vv.areaName;
                        objcc.id = i+'-'+ind + '-' + ii;
                        objc.children.push(objcc);
                    })
                    obj.children.push(objc);
                });
                treedata.push(obj);
            });
        }
        //获取推荐类型
        function wtf2(data) {
            data.map((v, i) => {
                let obj = {};
                obj.title = v.name;
                obj.id = i;
                obj.children = [];
                v.childList.map((val, ind) => {
                    console.log(val);
                    let objc = {};
                    objc.title = val.name;
                    objc.id = i+'-'+ind;
                    objc.children = [];
                    obj.children.push(objc);
                });
                treedata2.push(obj);
            });
        }
        var data = {
        }
        base.commonAjax('clav/area/getAddressList', data, function (data) {
            if (data.code == 1) {
                //console.log("z", data);
                wtf(data.data);
               // console.log(treedata)
                layui.use('tree', function () {
                    var tree = layui.tree;

                    //渲染
                    var inst1 = tree.render({
                        elem: '#test1'  //绑定元素
                        ,click: function(obj){
                       // console.log(obj.data); //得到当前点击的节点数据
                       // console.log(obj.elem); //得到当前节点元素 
                        // console.log($('.layui-tree-set').attr("data-id"));
                      //  console.log(obj.data.id); //得到当前点击的节点数据
                        let str = obj.data.id;
                       // console.log(str.indexOf('-')>-1);
                         if(str.indexOf('-')>-1 && str.indexOf('-')){
                            let arr = str.split('-');
                            if(arr.length == 3){
                               // console.log(arr);
                       // console.log(treedata[arr[0]].title);
                       // console.log(treedata[arr[0]].title);
                       // console.log(obj.data.title);
                        var place=treedata[arr[0]].title+"-"+treedata[arr[0]].title+"-"+obj.data.title;
                        //console.log("地区",place);
                        $('#szd').val(place);
                        $('#test1').css("visibility","hidden");
                            }
                         }
                    }
                        , data:treedata
                    });
                    
                });
            }
        });
        //推荐类型
        $('#test2').css("visibility","hidden");
        base.commonAjax('clav/recommendUnit/getRecommendType', data, function (data) {
            if (data.code == 1) {
                //console.log("z", data);
                treelocaldata = data.data;
                wtf2(data.data);
               // console.log(treedata)
                layui.use('tree', function () {
                    var tree = layui.tree;

                    //渲染
                    var inst1 = tree.render({
                        elem: '#test2'  //绑定元素
                        ,click: function(obj){
                           // console.log(obj);
                       // console.log(obj.data); //得到当前点击的节点数据
                       // console.log(obj.elem); //得到当前节点元素 
                        // console.log($('.layui-tree-set').attr("data-id"));
                      //  console.log(obj.data.id); //得到当前点击的节点数据
                        let str = obj.data.id;
                       // console.log(str.indexOf('-')>-1);
                         if(str.indexOf('-')>-1 && str.indexOf('-')){
                            let arr = str.split('-');
                            if(arr.length == 2){
                                console.log(treelocaldata[Number(arr[0])].childList[Number(arr[1])]);
                                let ids = treelocaldata[Number(arr[0])].childList[Number(arr[1])].id;
                                //console.log("推荐",arr);
                        //console.log(treedata2[arr[0]].title);
                       // console.log(treedata[arr[0]].title);
                       // console.log(obj.data.title);
                        var tjplace2 = obj.data.title;
                                    //+treedata2[arr[0]].title;
                                    //console.log("地区",place);
                                    $('#tjtype').val(tjplace2);
                                    $('#test2').css("visibility", "hidden");
                                    var data = {
                                        id: ids
                                    }
                                    base.commonAjax('clav/recommendUnit/getRecommendUnitOrPeople', data, function (res) {
                                        //console.log(res);
                                        layui.use('form', function () {
                                            var form = layui.form; //只有执行了这一步，部分表单元素才会自动修饰成功
                                            for (var i = 0; i < res.data.length; i++) {
                                                $('#tjcompany').append(
                                                    '<option value="' + res.data[i].id + '">' + res.data[i].name + '</option>'
                                                );
                                            }
                                            form.render();
                                        });
                                    })
                                }
                            }
                        }
                        , data: treedata2
                    });

                });
            }
        });


        function back() { 
            history.back();
         }

        $('#tjtype').on('click',function () { 
            $('#test2').css("visibility","visible");
         })
        $('#szd').click(function(){
            $('#test1').css("visibility","visible");
        })
        layui.use('form', function(){
          var form = layui.form; //只有执行了这一步，部分表单元素才会自动修饰成功
       form.on('select(mz3)',function(data){
            mz3=data.value;
           //mz3=data.elem[data.elem.selectedIndex].text;
           form.render('select');
       })
       form.on('select(jg)',function(data){
        jg=data.value;
           //jg=data.elem[data.elem.selectedIndex].text;
           form.render('select');
       })
       form.on('select(politicsStatusIdd)',function(data){
        politicsStatusIdd=data.value;
           //politicsStatusIdd=data.elem[data.elem.selectedIndex].text;
           form.render('select');
       })
       form.on('select(whcd)',function(data){
        whcd=data.value;
           //whcd=data.elem[data.elem.selectedIndex].text;
           form.render('select');
       })
       form.on('select(zyzc)',function(data){
        zyzc=data.value;
           //zyzc=data.elem[data.elem.selectedIndex].text;
           form.render('select');
       })
       form.on('select(ysml)',function(data){
           ysml=data.value;
           //ysml=data.elem[data.elem.selectedIndex].text;
           form.render('select');
       })
       form.on('select(ysml2)',function(data){
           ysml2=data.value;
           //ysml=data.elem[data.elem.selectedIndex].text;
           form.render('select');
       })
       form.on('select(tjcompany)',function(data){
          //tjcompany=data.value;
          tjcompany=data.elem[data.elem.selectedIndex].text;
           form.render('select');
       })
    });
    $(".jiah").on('click', function () {
        $(".ewai").css('display','block')
    })

    </script>
</body>

</html>